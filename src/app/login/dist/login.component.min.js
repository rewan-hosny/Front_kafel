"use strict";var __decorate=this&&this.__decorate||function(e,o,t,r){var n,i=arguments.length,s=i<3?o:null===r?r=Object.getOwnPropertyDescriptor(o,t):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,o,t,r);else for(var l=e.length-1;0<=l;l--)(n=e[l])&&(s=(i<3?n(s):3<i?n(o,t,s):n(o,t))||s);return 3<i&&s&&Object.defineProperty(o,t,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),login_module_1=require("../modules/login.module"),LoginComponent=function(){function e(e,o,t,r,n){this.cdr=e,this.authService=o,this.sharedService=t,this.router=r,this.jwtHelper=n,this.isLoggedIn=!1,this.newItem=new login_module_1.Login,this.errorMessages=""}return e.prototype.login=function(){var t=this;this.authService.login(this.newItem).subscribe(function(e){console.log(e),localStorage.setItem("Authorization",e.token);var o=t.jwtHelper.decodeToken(e.token);localStorage.setItem("name",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/name"]),localStorage.setItem("userid",o["http://schemas.xmlsoap.org/ws/2005/05/identity/claims/nameidentifier"]),t.isLoggedIn=!0,localStorage.setItem("isLoggedIn","true"),t.sharedService.setLoggedInStatus(t.isLoggedIn),t.cdr.detectChanges(),t.router.navigate(["/home"])},function(e){console.error("Login failed!",e),t.errorMessages=e,console.log(e.error.errors)})},e.prototype.logout=function(){localStorage.removeItem("Authorization"),localStorage.removeItem("name"),localStorage.removeItem("userid"),this.isLoggedIn=!1,localStorage.removeItem("isLoggedIn"),this.router.navigate(["/login"])},e=__decorate([core_1.Component({selector:"app-login",templateUrl:"./login.component.html",styleUrls:["./login.component.css"]})],e)}();exports.LoginComponent=LoginComponent;
//# sourceMappingURL=login.component.min.js.map
