"use strict";var __decorate=this&&this.__decorate||function(e,t,o,r){var c,i=arguments.length,s=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,o):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,o,r);else for(var n=e.length-1;0<=n;n--)(c=e[n])&&(s=(i<3?c(s):3<i?c(t,o,s):c(t,o))||s);return 3<i&&s&&Object.defineProperty(t,o,s),s};exports.__esModule=!0;var core_1=require("@angular/core"),Project_module_1=require("../modules/Project.module"),CreateOffer_module_1=require("../modules/CreateOffer.module"),person_module_1=require("../modules/person/person.module"),acceptedOffer_module_1=require("../modules/acceptedOffer.module"),ProjectDetailsComponent=function(){function e(e,t,o,r,c,i){this.http=e,this.authService=t,this.router=o,this.projectService=r,this.offerService=c,this.route=i,this.person=new person_module_1.Person,this.acceptoffer=new acceptedOffer_module_1.AcceptedOffer,this.projectDetails=new Project_module_1.Project,this.console=console,this.OfferDetails=[],this.acceptanceStatus=null,this.createOffer=new CreateOffer_module_1.CreateOffer,this.showBidSection=!0}return e.prototype.ngOnInit=function(){var o=this;this.route.params.subscribe(function(e){o.projectId=+e.id;var t=localStorage.getItem("showBidSection_"+o.projectId);null!==t&&(o.showBidSection=JSON.parse(t)),o.getProjectDetails(),o.getOfferDetails(),o.PersonData(),o.getIfFreelance(),o.GetAcceptedOffer()})},e.prototype.GetAcceptedOffer=function(){var t=this;this.offerService.GetAcceptProject(this.projectId).subscribe(function(e){t.acceptoffer=e},function(e){console.log(e)})},e.prototype.hideBidSection=function(){this.showBidSection=!1,localStorage.setItem("showBidSection_"+this.projectId,JSON.stringify(this.showBidSection))},e.prototype.toggleBidSection=function(){this.showBidSection=!this.showBidSection,localStorage.setItem("showBidSection_"+this.projectId,JSON.stringify(this.showBidSection))},e.prototype.getProjectDetails=function(){var t=this;this.projectService.GetOneProject(this.projectId).subscribe(function(e){t.projectDetails=e},function(e){console.error("Error fetching project details:",e)})},e.prototype.getIfFreelance=function(){var t=this;this.offerService.GetIfFreelance().subscribe(function(e){t.messagge=e,console.log(t.messagge)},function(e){console.log(t.messagge.freelance),console.error("Error fetching project details:",e)})},e.prototype.CreateOffers=function(){var e=this;this.offerService.CreateOffer(this.createOffer,this.projectId).subscribe(function(){console.log("offer item  updated successfully."),e.getOfferDetails()},function(e){console.log("Error updating }: "+e)})},e.prototype.getSafeImageUrl=function(e){return e?"data:image/jpeg;base64,"+e:" "},e.prototype.getOfferDetails=function(){var t=this;this.offerService.GetOffer(this.projectId).subscribe(function(e){t.OfferDetails=e},function(e){console.error("Error fetching project details:",e)})},e.prototype.PersonData=function(){var t=this;this.authService.GetUser().subscribe(function(e){t.person=e},function(e){console.log(e)})},e.prototype.AcceptOffer=function(e){var t=this;this.offerService.AcceptProject(e).subscribe(function(e){console.log("Accepted offer successfully."),t.toggleBidSection(),t.getOfferDetails(),t.acceptanceStatus="Offer accepted! You have accepted the offer with ID "+e.id+"."},function(e){console.log("Error accepting offer: "+e),400===e.status&&"Invalid request. You have already accepted an offer for this project."===e.error?t.acceptanceStatus="Invalid request! You have already accepted an offer for this project.":t.acceptanceStatus="Error accepting offer. An error occurred while accepting the offer. Please try again later."})},e.prototype.viewProjectDetails=function(e){this.router.navigate(["/manageProject",e])},e=__decorate([core_1.Component({selector:"app-project-details",templateUrl:"./project-details.component.html",styleUrls:["./project-details.component.css"]})],e)}();exports.ProjectDetailsComponent=ProjectDetailsComponent;
//# sourceMappingURL=project-details.component.min.js.map
