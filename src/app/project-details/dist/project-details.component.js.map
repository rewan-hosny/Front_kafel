{"version":3,"sources":["project-details.component.ts"],"names":[],"mappings":"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","file":"project-details.component.js","sourcesContent":["import { Component } from '@angular/core';\nimport { ProjectServicesService } from '../services/project-services.service';\nimport { OfferServicesService } from '../services/offer-services.service';\nimport { HttpClient } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { ActivatedRoute } from '@angular/router';\nimport { Project } from '../modules/Project.module';\nimport { Offer } from '../modules/Offers.module';\nimport { CreateOffer } from '../modules/CreateOffer.module';\nimport { AuthServicesService } from '../services/auth-services.service';\nimport { Person } from '../modules/person/person.module';\nimport { AcceptedOffer } from '../modules/acceptedOffer.module';\n\n\n@Component({\n  selector: 'app-project-details',\n  templateUrl: './project-details.component.html',\n  styleUrls: ['./project-details.component.css']\n})\nexport class ProjectDetailsComponent {\n  projectId!: number;\n  person: Person = new Person();\n    acceptoffer: AcceptedOffer = new AcceptedOffer();\n  id!: number; // Property to store the project ID\n  projectDetails:Project= new Project();\n  console = console;\n   messagge:any; \n  OfferDetails: Offer[] = [];\n    acceptanceStatus: string | null = null; \n   createOffer: CreateOffer = new CreateOffer(); // Initialize createOffer with a new instance of CreateOffer\nshowBidSection: boolean = true;\n  constructor(private http: HttpClient, private authService: AuthServicesService,private router: Router, private projectService: ProjectServicesService,private offerService:OfferServicesService , private route: ActivatedRoute,) { }\n ngOnInit(): void {\n  // Retrieve the project ID from the route parameter\n  this.route.params.subscribe(params => {\n    this.projectId = +params['id']; // Assuming the route parameter name is 'id'\n    \n\n    // Load the 'showBidSection' value from browser storage when the component initializes\n    const storedShowBidSection = localStorage.getItem(`showBidSection_${this.projectId}`);\n    if (storedShowBidSection !== null) {\n      this.showBidSection = JSON.parse(storedShowBidSection);\n    }\n\n    this.getProjectDetails();\n    this.getOfferDetails();\n    this.PersonData();\n    this.getIfFreelance();\n     this.GetAcceptedOffer();\n  });\n}\n GetAcceptedOffer() {\n    this.offerService.GetAcceptProject(this.projectId).subscribe(\n      (result: any) => {\n        this.acceptoffer = result;\n  \n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n }\n  \nhideBidSection() {\n  this.showBidSection = false;\n  // Save the 'showBidSection' value to browser storage when it changes\n  localStorage.setItem(`showBidSection_${this.projectId}`, JSON.stringify(this.showBidSection));\n}\n\n// Rename the method to toggleBidSection\ntoggleBidSection() {\n  this.showBidSection = !this.showBidSection;\n  // Save the 'showBidSection' value to browser storage when it changes\n  localStorage.setItem(`showBidSection_${this.projectId}`, JSON.stringify(this.showBidSection));\n}\n\n  getProjectDetails() {\n    // Call the GetOneProject function with the project ID\n    this.projectService.GetOneProject(this.projectId).subscribe(\n      (data: any) => {\n        // Handle the response, here 'data' contains the project details\n        this.projectDetails = data;\n        // You can now use 'this.projectDetails' to display the project details on your template\n      },\n      error => {\n        // Handle the error if the API call fails\n        console.error('Error fetching project details:', error);\n      });\n}\n  getIfFreelance(){\n  \n    this.offerService.GetIfFreelance().subscribe(\n      (data: any) => {\n        // Handle the response, here 'data' contains the project details\n        this.messagge = data;\n        console.log(this.messagge)\n        // You can now use 'this.projectDetails' to display the project details on your template\n      },\n      error => {\n        // Handle the error if the API call fails\n   \n            console.log(this.messagge.freelance)\n        console.error('Error fetching project details:', error);\n      });\n  }\n  CreateOffers():void {\n    this.offerService.CreateOffer(this.createOffer,this.projectId).subscribe(\n    () => {\n        console.log(`offer item  updated successfully.`);\n        this.getOfferDetails();\n   \n    },\n    (error: any) => {\n      console.log(`Error updating }: ${error}`);\n    }\n  );;\n\n    \n  }\n  \n    getSafeImageUrl(base64String: string | undefined): string {\n  if (base64String) {\n    return 'data:image/jpeg;base64,' + base64String;\n  } else {\n   \n    return ' ';\n  }\n}\n  getOfferDetails(){\n  \n    this.offerService.GetOffer(this.projectId).subscribe(\n      (data: any) => {\n        // Handle the response, here 'data' contains the project details\n        this.OfferDetails = data;\n        // You can now use 'this.projectDetails' to display the project details on your template\n      },\n      error => {\n        // Handle the error if the API call fails\n        console.error('Error fetching project details:', error);\n      });\n  }\n   \n  PersonData() {\n    this.authService.GetUser().subscribe(\n      (result: any) => {\n        this.person = result;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n\n    AcceptOffer(id: number): void {\n    this.offerService.AcceptProject(id).subscribe(\n      (response: any) => {\n        console.log(`Accepted offer successfully.`);\n  this.toggleBidSection(); \n        this.getOfferDetails();\n        this.acceptanceStatus = `Offer accepted! You have accepted the offer with ID ${response.id}.`;\n      },\n      (error: any) => {\n        console.log(`Error accepting offer: ${error}`);\n        if (error.status === 400 && error.error === 'Invalid request. You have already accepted an offer for this project.') {\n          this.acceptanceStatus = 'Invalid request! You have already accepted an offer for this project.';\n        } else {\n          this.acceptanceStatus = 'Error accepting offer. An error occurred while accepting the offer. Please try again later.';\n        }\n      }\n    );\n    }\n    viewProjectDetails(id: number) {\n    this.router.navigate(['/manageProject', id]);\n  }\n\n\n}\n"]}