"use strict";var __decorate=this&&this.__decorate||function(e,o,t,i){var s,r=arguments.length,n=r<3?o:null===i?i=Object.getOwnPropertyDescriptor(o,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(e,o,t,i);else for(var c=e.length-1;0<=c;c--)(s=e[c])&&(n=(r<3?s(n):3<r?s(o,t,n):s(o,t))||n);return 3<r&&n&&Object.defineProperty(o,t,n),n};exports.__esModule=!0;var core_1=require("@angular/core"),GetImage_module_1=require("../modules/GetImage.module"),Message_module_1=require("../modules/Message.module"),acceptedOffer_module_1=require("../modules/acceptedOffer.module"),person_module_1=require("../modules/person/person.module"),ManageProjectComponent=function(){function e(e,o,t,i,s,r){this.http=e,this.router=o,this.route=t,this.authService=i,this.offerService=s,this.jwtHelper=r,this.person=new person_module_1.Person,this.message=new Message_module_1.Message,this.acceptoffer=new acceptedOffer_module_1.AcceptedOffer,this.getImage=new GetImage_module_1.GetImage,this.messages=[],this.massege="",this.reciverId=0}return e.prototype.ngOnInit=function(){var o=this;this.PersonData(),this.GetImage(),this.route.params.subscribe(function(e){o.projectId=+e.id,o.GetAcceptedOffer(),o.GetMessages(),o.getIfFreelance()})},e.prototype.calculateReceiverId=function(){var e,o,t,i,s,r,n,c,l,a,u,d,f;return(null===(i=null===(t=null===(o=null===(e=this.acceptoffer)||void 0===e?void 0:e.offers)||void 0===o?void 0:o.freelance)||void 0===t?void 0:t.person)||void 0===i?void 0:i.id)===(null===(s=this.person)||void 0===s?void 0:s.id)?(null===(l=null===(c=null===(n=null===(r=this.acceptoffer)||void 0===r?void 0:r.offers)||void 0===n?void 0:n.project)||void 0===c?void 0:c.person)||void 0===l?void 0:l.id)||0:(null===(f=null===(d=null===(u=null===(a=this.acceptoffer)||void 0===a?void 0:a.offers)||void 0===u?void 0:u.freelance)||void 0===d?void 0:d.person)||void 0===f?void 0:f.id)||0},e.prototype.calculateReceiverName=function(){var e,o,t,i,s,r,n,c,l,a,u,d,f;return(null===(i=null===(t=null===(o=null===(e=this.acceptoffer)||void 0===e?void 0:e.offers)||void 0===o?void 0:o.freelance)||void 0===t?void 0:t.person)||void 0===i?void 0:i.id)===(null===(s=this.person)||void 0===s?void 0:s.id)?(null===(l=null===(c=null===(n=null===(r=this.acceptoffer)||void 0===r?void 0:r.offers)||void 0===n?void 0:n.freelance)||void 0===c?void 0:c.person)||void 0===l?void 0:l.firstName)||"Unknown":(null===(f=null===(d=null===(u=null===(a=this.acceptoffer)||void 0===a?void 0:a.offers)||void 0===u?void 0:u.project)||void 0===d?void 0:d.person)||void 0===f?void 0:f.firstName)||"Unknown"},e.prototype.getIfFreelance=function(){var o=this;this.offerService.GetIfFreelance().subscribe(function(e){o.messagge=e,console.log(o.messagge)},function(e){console.log(o.messagge.freelance),console.error("Error fetching project details:",e)})},e.prototype.PersonData=function(){var o=this;this.authService.GetUser().subscribe(function(e){o.person=e},function(e){console.log(e)})},e.prototype.GetMessages=function(){var o=this;this.offerService.GetMessages(this.projectId).subscribe(function(e){o.messages=e},function(e){console.log(e)})},e.prototype.GetImage=function(){var o=this;this.authService.GetImage().subscribe(function(e){o.getImage=e,o.imageSrc="data:image/jpeg;base64,"+o.getImage.imageUrl},function(e){console.log(e)})},e.prototype.GetAcceptedOffer=function(){var o=this;this.offerService.GetAcceptProject(this.projectId).subscribe(function(e){o.acceptoffer=e},function(e){console.log(e)})},e.prototype.submitForm=function(){this.Rewan(this.massege)},e.prototype.Rewan=function(e){this.PostMessage(e),console.log(e)},e.prototype.PostMessage=function(e){var o=this;this.massege=e,this.reciverId=this.calculateReceiverId(),this.offerService.PotsMessage(this.massege,this.reciverId,this.projectId).subscribe(function(){console.log("message send successfully."),o.GetMessages()},function(e){console.log("Error updating }: "+e)})},e=__decorate([core_1.Component({selector:"app-manage-project",templateUrl:"./manage-project.component.html",styleUrls:["./manage-project.component.css"]})],e)}();exports.ManageProjectComponent=ManageProjectComponent;
//# sourceMappingURL=manage-project.component.min.js.map
