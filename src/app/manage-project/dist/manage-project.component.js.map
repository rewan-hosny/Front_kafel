{"version":3,"sources":["manage-project.component.ts"],"names":[],"mappings":"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","file":"manage-project.component.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthServicesService } from '../services/auth-services.service';\nimport { JwtHelperService } from '@auth0/angular-jwt';\n\nimport { GetImage } from '../modules/GetImage.module';\nimport { OfferServicesService } from '../services/offer-services.service';\nimport { Message } from '../modules/Message.module';\nimport { ActivatedRoute } from '@angular/router';\nimport { AcceptedOffer } from '../modules/acceptedOffer.module';\nimport { Person } from '../modules/person/person.module';\n\n@Component({\n  selector: 'app-manage-project',\n  templateUrl: './manage-project.component.html',\n  styleUrls: ['./manage-project.component.css']\n})\nexport class ManageProjectComponent {\n  person: Person = new Person();\n  message: Message = new Message();\n  acceptoffer: AcceptedOffer = new AcceptedOffer();\n  getImage: GetImage = new GetImage();\n    messages: Message[] = [];\n    projectId!: number;\n  public imageSrc: string | undefined;\n  constructor(private http: HttpClient, private router: Router,private route: ActivatedRoute, private authService: AuthServicesService, private offerService: OfferServicesService, private jwtHelper: JwtHelperService) { }\n  ngOnInit(): void {\n    this.PersonData();\n    this.GetImage();\n     this.route.params.subscribe(params => {\n    this.projectId = +params['id']; // Assuming the route parameter name is 'id'\n       this.GetAcceptedOffer();\n       this.GetMessages();\n\n   \n  });\n  }\ncalculateReceiverId(): number {\n    if (this.acceptoffer?.offers?.freelance?.person?.id === this.person?.id) {\n      return this.acceptoffer?.offers?.project?.person?.id || 0;\n    } else {\n      return this.acceptoffer?.offers?.freelance?.person?.id || 0;\n    }\n}\n  calculateReceiverName(): string {\n  if (this.acceptoffer?.offers?.freelance?.person?.id === this.person?.id) {\n    return this.acceptoffer?.offers?.project?.person?.firstName || 'Unknown';\n  } else {\n    return this.acceptoffer?.offers?.freelance?.person?.firstName || 'Unknown';\n  }\n}\n\n  onFormSubmit() {\n  this.PostMessage(this.message);\n}\n \n  PersonData() {\n    this.authService.GetUser().subscribe(\n      (result: any) => {\n        this.person = result;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n  GetMessages() {\n  this.offerService.GetMessages(this.projectId).subscribe(\n    (result: any) => {\n      this.messages = result;\n \n    },\n    (error: any) => {\n      console.log(error);\n    }\n  );\n   }\n\n  GetImage() {\n    this.authService.GetImage().subscribe(\n      (result: any) => {\n        this.getImage = result;\n        this.imageSrc = `data:image/jpeg;base64,${this.getImage.imageUrl}`;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n GetAcceptedOffer() {\n    this.offerService.GetAcceptProject(this.projectId).subscribe(\n      (result: any) => {\n        this.acceptoffer = result;\n  \n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n\n  PostMessage(message:Message) {\n    message.massege = \"bay \";\n    this.message.reciverName = this.calculateReceiverName();\n     this.message.reciverId = this.calculateReceiverId();\n    this.offerService.PotsMessage(this.message, this.projectId).subscribe(\n      () => {\n        console.log(`message send successfully.`);\n        this.GetMessages();\n   \n      },\n      (error: any) => {\n        console.log(`Error updating }: ${error}`);\n      }\n    );;\n  }\n\n\n\n}"]}