{"version":3,"sources":["manage-project.component.ts"],"names":[],"mappings":"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","file":"manage-project.component.js","sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { AuthServicesService } from '../services/auth-services.service';\nimport { JwtHelperService } from '@auth0/angular-jwt';\n\nimport { GetImage } from '../modules/GetImage.module';\nimport { OfferServicesService } from '../services/offer-services.service';\nimport { Message } from '../modules/Message.module';\nimport { ActivatedRoute } from '@angular/router';\nimport { AcceptedOffer } from '../modules/acceptedOffer.module';\nimport { Person } from '../modules/person/person.module';\n\n@Component({\n  selector: 'app-manage-project',\n  templateUrl: './manage-project.component.html',\n  styleUrls: ['./manage-project.component.css']\n})\nexport class ManageProjectComponent {\n  person: Person = new Person();\n  message: Message = new Message();\n  acceptoffer: AcceptedOffer = new AcceptedOffer();\n  getImage: GetImage = new GetImage();\n  messages: Message[] = [];\n  massege: string = '';\n  reciverId: number = 0;\n     messagge:any; \n\nprojectId!: number;\n  public imageSrc: string | undefined;\n  constructor(private http: HttpClient, private router: Router,private route: ActivatedRoute, private authService: AuthServicesService, private offerService: OfferServicesService, private jwtHelper: JwtHelperService) { }\n  ngOnInit(): void {\n    this.PersonData();\n    this.GetImage();\n     this.route.params.subscribe(params => {\n    this.projectId = +params['id']; // Assuming the route parameter name is 'id'\n       this.GetAcceptedOffer();\n       this.GetMessages();\n       this.getIfFreelance();\n\n   \n  });\n  }\ncalculateReceiverId(): number {\n    if (this.acceptoffer?.offers?.freelance?.person?.id === this.person?.id) {\n      return this.acceptoffer?.offers?.project?.person?.id || 0;\n    } else {\n      return this.acceptoffer?.offers?.freelance?.person?.id || 0;\n    }\n}\n  calculateReceiverName(): string {\n  if (this.acceptoffer?.offers?.freelance?.person?.id === this.person?.id) {\n    return  this.acceptoffer?.offers?.freelance?.person?.firstName || 'Unknown';\n  } else {\n    return this.acceptoffer?.offers?.project?.person?.firstName || 'Unknown';\n  }\n}\n\n  getIfFreelance(){\n  \n    this.offerService.GetIfFreelance().subscribe(\n      (data: any) => {\n        // Handle the response, here 'data' contains the project details\n        this.messagge = data;\n        console.log(this.messagge)\n        // You can now use 'this.projectDetails' to display the project details on your template\n      },\n      error => {\n        // Handle the error if the API call fails\n   \n            console.log(this.messagge.freelance)\n        console.error('Error fetching project details:', error);\n      });\n  }\n \n  PersonData() {\n    this.authService.GetUser().subscribe(\n      (result: any) => {\n        this.person = result;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n  GetMessages() {\n  this.offerService.GetMessages(this.projectId).subscribe(\n    (result: any) => {\n      this.messages = result;\n \n    },\n    (error: any) => {\n      console.log(error);\n    }\n  );\n   }\n\n  GetImage() {\n    this.authService.GetImage().subscribe(\n      (result: any) => {\n        this.getImage = result;\n        this.imageSrc = `data:image/jpeg;base64,${this.getImage.imageUrl}`;\n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n  }\n GetAcceptedOffer() {\n    this.offerService.GetAcceptProject(this.projectId).subscribe(\n      (result: any) => {\n        this.acceptoffer = result;\n  \n      },\n      (error: any) => {\n        console.log(error);\n      }\n    );\n }\n   submitForm() {\n    // Call the Rewan function and pass the inputValue as an argument\n    this.Rewan(this.massege);\n  }\n\n  Rewan(e: string) {\n    this.PostMessage(e);\n    console.log(e);\n}\n  PostMessage(e:string) {\n    this.massege = e;\n     this.reciverId = this.calculateReceiverId();\n    this.offerService.PotsMessage(this.massege,this.reciverId, this.projectId).subscribe(\n      () => {\n        console.log(`message send successfully.`);\n        this.GetMessages();\n   \n      },\n      (error: any) => {\n        console.log(`Error updating }: ${error}`);\n      }\n    );;\n  }\n\n\n\n}"]}